<%- include('../partials/head') %>

<div class="container d-flex justify-content-center">


    <div class="card mb-3" style="min-width: 800px; max-width:900px" >
      <div class="row g-0">
        <div class="col-md-6">
          <img src="<%=recipe.image%>" style= "width: 400px ;height:500px; object-fit: cover;" alt="Card image cap">
        </div>
        <div class="col-md-6">
          <div class="card-body">
            <h2 class="card-title"><%=recipe.name%></h2>
            <h5 class="category">Category: <%=recipe.category%></h5>
            <p>Posted By: <%= recipe.user.first_name %> </p>
            <p class="recipe-description" style="margin-top:50px">Had an amazing day, whipped up someting for <%=recipe.category%></p>
            <div class="rate-edit-review" style="margin-top:50px">
            <% if (user) { %>
            <a href="/recipes/<%= recipe.slug %>/ratings/new" class="btn btn-light">Rate</a>
            <a href="/recipes/<%= recipe.slug %>/edit" class="btn btn-light">Edit</a>
            <form method="post" style="margin: 0 auto" action="/recipes/<%= recipe.slug %>?_method=DELETE">
            <button type="submit" class="btn btn-danger">Delete</a>
            </form>
            <% } %>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>
           
            <div class="container">
              <% if (user) { %>
              <form method="POST" action="/recipes/<%= recipe.slug %>/ratings">
                  <div class="mb-3">
                      <label for="rating" class="form-label">Rating</label>
                      <select name="rating" id="rating" class="form-select">
                          <option value="" selected>Open this select menu</option>
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5</option>
                      </select>
                  </div>

                 
                  <div class="mb-3">
                    <label for="comment" class="form-label">Comment (optional)</label>
                    <textarea class="form-control" id="comment" name="comment" rows="3"></textarea>
                  </div>
                  <button type="submit" class="btn btn-primary">Give Rating</button>
              </form>
              <% } %>


              <section id="product-ratings" class="mt-5">
                <ul class="list-group">
                  <% ratings.forEach(element => { %>
                    <li class="list-group-item">
                      <p>Posted By: <%= element.user.first_name %> </p>
                      <p>Rating Score: <%= element.rating%> </p>
                      <p>Comment: <%= element.comment %></p>
                      <p>Rated At: <%= element.created_at %> </p>
                    </li>
                  <% }); %>
                </ul>
              </section>
            </div>


          </div>
          

<%- include('../partials/foot') %>
